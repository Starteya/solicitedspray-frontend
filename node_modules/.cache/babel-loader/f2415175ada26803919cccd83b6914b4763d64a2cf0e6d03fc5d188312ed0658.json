{"ast":null,"code":"// src/pages/SearchResultsPage.js\nimport React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import axios from'axios';import RouteList from'../components/RouteList';// route data\nimport Spinner from'../components/Spinner';// for loading\nimport Pagination from'../components/Pagination';// Import pagination\nimport styles from'./SearchResultsPage.module.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function SearchResultsPage(){const[routes,setRoutes]=useState([]);const[loading,setLoading]=useState(true);const[totalResults,setTotalResults]=useState(0);const[totalPages,setTotalPages]=useState(1);const[currentPage,setCurrentPage]=useState(1);const[error,setError]=useState(null);const location=useLocation();const navigate=useNavigate();// Parse query parameters\nconst queryParams=new URLSearchParams(location.search);const query=queryParams.get('query')||'';const page=parseInt(queryParams.get('page'))||1;useEffect(()=>{if(!query){// Handle missing query parameter\nsetLoading(false);setError('No search query provided.');return;}const fetchRoutes=async()=>{try{setLoading(true);// Use environment variable for API base URL\nconst response=await axios.get(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/routes/search\"),{params:{query,page}});setRoutes(response.data.routes);setTotalResults(response.data.totalResults);setTotalPages(response.data.totalPages);setCurrentPage(response.data.currentPage);setError(null);}catch(error){console.error('Error fetching routes:',error);setError('Error fetching routes. Please try again later.');setRoutes([]);}finally{setLoading(false);}};fetchRoutes();},[query,page]);const handlePageChange=pageNumber=>{// Update the URL with the new page parameter\nnavigate(\"/search?query=\".concat(encodeURIComponent(query),\"&page=\").concat(pageNumber));};if(loading){return/*#__PURE__*/_jsx(Spinner,{});}if(error){return/*#__PURE__*/_jsx(\"div\",{children:error});}if(routes.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:styles.noResults,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.icon,children:\"\\uD83D\\uDEAB\"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:styles.message,children:[\"No routes found for \\\"\",query,\"\\\".\"]}),/*#__PURE__*/_jsx(\"div\",{className:styles.suggestion,children:\"Try refining your search, check the spelling, or remove unecessary punctuation.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.searchResultsPage,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.topLinks,children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.mainContent,children:loading?/*#__PURE__*/_jsx(Spinner,{}):error?/*#__PURE__*/_jsx(\"div\",{className:styles.errorMessage,children:error}):routes.length===0?/*#__PURE__*/_jsxs(\"div\",{className:styles.noResults,children:[\"No routes found for \\\"\",query,\"\\\".\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Search Results for \\\"\",query,\"\\\"\"]}),/*#__PURE__*/_jsx(RouteList,{routes:routes}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,totalResults:totalResults,onPageChange:handlePageChange})]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.bottomLinks,children:[/*#__PURE__*/_jsx(\"a\",{href:\"/contact\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/privacy\",children:\"Privacy\"})]})]});}export default SearchResultsPage;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","axios","RouteList","Spinner","Pagination","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchResultsPage","routes","setRoutes","loading","setLoading","totalResults","setTotalResults","totalPages","setTotalPages","currentPage","setCurrentPage","error","setError","location","navigate","queryParams","URLSearchParams","search","query","get","page","parseInt","fetchRoutes","response","concat","process","env","REACT_APP_API_BASE_URL","params","data","console","handlePageChange","pageNumber","encodeURIComponent","children","length","className","noResults","icon","message","suggestion","searchResultsPage","topLinks","href","mainContent","errorMessage","onPageChange","bottomLinks"],"sources":["/Users/starteyapais/Documents/SolicitedSpray/frontend/src/pages/SearchResultsPage.js"],"sourcesContent":["// src/pages/SearchResultsPage.js\n\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport RouteList from '../components/RouteList'; // route data\nimport Spinner from '../components/Spinner'; // for loading\nimport Pagination from '../components/Pagination'; // Import pagination\nimport styles from './SearchResultsPage.module.css';\n\n\nfunction SearchResultsPage() {\n  const [routes, setRoutes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [totalResults, setTotalResults] = useState(0);\n  const [totalPages, setTotalPages] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [error, setError] = useState(null);\n\n  const location = useLocation();\n  const navigate = useNavigate();\n\n// Parse query parameters\nconst queryParams = new URLSearchParams(location.search);\nconst query = queryParams.get('query') || '';\nconst page = parseInt(queryParams.get('page')) || 1;\n\nuseEffect(() => {\n  if (!query) {\n    // Handle missing query parameter\n    setLoading(false);\n    setError('No search query provided.');\n    return;\n  }\n\n  const fetchRoutes = async () => {\n    try {\n      setLoading(true);\n      // Use environment variable for API base URL\n      const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/routes/search`, {\n        params: { query, page },\n      });\n      setRoutes(response.data.routes);\n\n      setTotalResults(response.data.totalResults);\n      setTotalPages(response.data.totalPages);\n      setCurrentPage(response.data.currentPage);\n      setError(null);\n    } catch (error) {\n      console.error('Error fetching routes:', error);\n      setError('Error fetching routes. Please try again later.');\n      setRoutes([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  fetchRoutes();\n}, [query, page]);\n\nconst handlePageChange = (pageNumber) => {\n  // Update the URL with the new page parameter\n  navigate(`/search?query=${encodeURIComponent(query)}&page=${pageNumber}`);\n};\n\nif (loading) {\n  return <Spinner />;\n}\n\nif (error) {\n  return <div>{error}</div>;\n}\n\nif (routes.length === 0) {\n    return (\n    <div className={styles.noResults}>\n      <div className={styles.icon}>ðŸš«</div> {/* You can replace this with an actual icon */}\n      <div className={styles.message}>\n        No routes found for \"{query}\".\n      </div>\n      <div className={styles.suggestion}>\n        Try refining your search, check the spelling, or remove unecessary punctuation.\n      </div>\n    </div>\n  );\n}\n\nreturn (\n <div className={styles.searchResultsPage}>\n      {/* Top Links */}\n      <div className={styles.topLinks}>\n        <a href=\"/\">Home</a>\n    {/*<a href=\"/add-video\">Add Your Video</a>*/}\n      </div>\n\n      {/* Main Content */}\n      <div className={styles.mainContent}>\n        {loading ? (\n          <Spinner />\n        ) : error ? (\n          <div className={styles.errorMessage}>{error}</div>\n        ) : routes.length === 0 ? (\n          <div className={styles.noResults}>No routes found for \"{query}\".</div>\n        ) : (\n          <>\n            <h2>Search Results for \"{query}\"</h2>\n            <RouteList routes={routes} />\n            <Pagination\n              currentPage={currentPage}\n              totalPages={totalPages}\n              totalResults={totalResults}\n              onPageChange={handlePageChange}\n            />\n          </>\n        )}\n      </div>\n\n      {/* Bottom Links */}\n      <div className={styles.bottomLinks}>\n        <a href=\"/contact\">Contact</a>\n        <a href=\"/privacy\">Privacy</a>\n      </div>\n    </div>\n);\n}\n\nexport default SearchResultsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}