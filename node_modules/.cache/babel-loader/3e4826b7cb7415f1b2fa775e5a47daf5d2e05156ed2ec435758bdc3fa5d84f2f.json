{"ast":null,"code":"var _jsxFileName = \"/Users/starteyapais/Documents/SolicitedSpray/frontend/src/components/SearchBar.js\",\n  _s = $RefreshSig$();\n// src/components/SearchBar.js\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './SearchBar.css';\nimport { fetchRoutes } from '../api/api'; // import fetchRoutes function\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SearchBar() {\n  _s();\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const navigate = useNavigate();\n  const timerRef = useRef(null);\n  const handleSearch = e => {\n    e.preventDefault();\n    if (query.trim()) {\n      navigate(`/search?query=${encodeURIComponent(query)}`);\n    }\n  };\n\n  // Function to fetch results using fetchRoutes - from backend\n  const getSearchResults = async searchQuery => {\n    if (searchQuery.trim() === '') {\n      setResults([]);\n      return;\n    }\n    try {\n      const response = await fetchRoutes(searchQuery);\n      // Assuming the response data is an array of routes\n      const routes = response.data.routes;\n\n      // Set top 5 results\n      setResults(routes.slice(0, 5)); // Adjust as needed\n    } catch (error) {\n      console.error('Error fetching results', error);\n      setResults([]);\n    }\n  };\n\n  // Effect to handle debounced search queries\n  useEffect(() => {\n    // Clear the previous timer\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n    }\n\n    // If the query is empty, clear results\n    if (query.trim() === '') {\n      setResults([]);\n      return;\n    }\n\n    // Set a new timer to fetch results after 100ms\n    timerRef.current = setTimeout(() => {\n      getSearchResults(query);\n    }, 100);\n\n    // Cleanup function to clear the timer when the component unmounts or query changes\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n      }\n    };\n  }, [query]);\n\n  // Handle clicking on a result\n  const handleResultClick = result => {\n    // Navigate to the result's page or set the query\n    navigate(`/route/${result._id}`); // Adjust the path according to your routes\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-bar\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSearch,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search for routes or crags\",\n        value: query,\n        onChange: e => setQuery(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), results.length > 0 && query.trim() !== '' && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"search-results\",\n      children: results.map(result => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => handleResultClick(result),\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: result.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"em\", {\n            children: result.crag\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 8\n          }, this), \" - \", /*#__PURE__*/_jsxDEV(\"em\", {\n            children: result.area\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 33\n          }, this)]\n        }, result._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchBar, \"eqqx2Cak6YhAG5VKqoCS4llBrKE=\", false, function () {\n  return [useNavigate];\n});\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","fetchRoutes","jsxDEV","_jsxDEV","SearchBar","_s","query","setQuery","results","setResults","navigate","timerRef","handleSearch","e","preventDefault","trim","encodeURIComponent","getSearchResults","searchQuery","response","routes","data","slice","error","console","current","clearTimeout","setTimeout","handleResultClick","result","_id","className","children","onSubmit","autoComplete","type","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","length","map","onClick","name","crag","area","_c","$RefreshReg$"],"sources":["/Users/starteyapais/Documents/SolicitedSpray/frontend/src/components/SearchBar.js"],"sourcesContent":["// src/components/SearchBar.js\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './SearchBar.css';\nimport { fetchRoutes } from '../api/api'; // import fetchRoutes function\n\nfunction SearchBar() {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const navigate = useNavigate();\n  const timerRef = useRef(null);\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    if (query.trim()) {\n      navigate(`/search?query=${encodeURIComponent(query)}`);\n    }\n  };\n\n  // Function to fetch results using fetchRoutes - from backend\n  const getSearchResults = async (searchQuery) => {\n    if (searchQuery.trim() === '') {\n      setResults([]);\n      return;\n    }\n\n  try {\n    const response = await fetchRoutes(searchQuery);\n    // Assuming the response data is an array of routes\n    const routes = response.data.routes;\n\n    // Set top 5 results\n    setResults(routes.slice(0, 5)); // Adjust as needed\n  } catch (error) {\n    console.error('Error fetching results', error);\n    setResults([]);\n  }\n};\n\n// Effect to handle debounced search queries\n  useEffect(() => {\n    // Clear the previous timer\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n    }\n\n    // If the query is empty, clear results\n    if (query.trim() === '') {\n      setResults([]);\n      return;\n    }\n\n    // Set a new timer to fetch results after 100ms\n    timerRef.current = setTimeout(() => {\n      getSearchResults(query);\n    }, 100);\n\n    // Cleanup function to clear the timer when the component unmounts or query changes\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n      }\n    };\n  }, [query]);\n\n  // Handle clicking on a result\n  const handleResultClick = (result) => {\n    // Navigate to the result's page or set the query\n    navigate(`/route/${result._id}`); // Adjust the path according to your routes\n  };\n\n  return (\n    <div className=\"search-bar\">\n      <form onSubmit={handleSearch} autoComplete=\"off\">\n        <input\n          type=\"text\"\n          placeholder=\"Search for routes or crags\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n        />\n        <button type=\"submit\">Search</button>\n      </form>\n      {results.length > 0 && query.trim() !== '' && (\n        <ul className=\"search-results\">\n          {results.map((result) => {\n            return (<li key={result._id} onClick={() => handleResultClick(result)}>\n       <strong>{result.name}</strong>\n       <br/>\n       <em>{result.crag}</em> - <em>{result.area}</em>\n       {/* Assuming result.crag exists */}\n          </li>\n          );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default SearchBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}